<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="A region in the tree, or in space in general.  A type implementing this will be tightly coupled to some type implementing KdPoint.  For example, the prebuilt CuPoint struct represents a point in Cartesian space with Euclidean distance, and the prebuilt CuRegion struct represents cuboid regions of space (rectangles in 2D, rectangular prisms in 3D, etc). Regions often represent infinitely many points in space (how many points are in your typical rectangle?).  Regions should be able to represent a single point, but the ability to represent an empty region isn’t necessary."><title>KdRegion in crater - Rust</title><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/SourceSerif4-Regular-46f98efaafac5295.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/FiraSans-Regular-018c141bf0843ffd.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/FiraSans-Medium-8f9a781e4970d388.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/SourceCodePro-Regular-562dcc5011b6de7d.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/SourceCodePro-Semibold-d899c5a5c4aeb14a.ttf.woff2"><link rel="stylesheet" href="../static.files/normalize-76eba96aa4d2e634.css"><link rel="stylesheet" href="../static.files/rustdoc-5bc39a1768837dd0.css"><meta name="rustdoc-vars" data-root-path="../" data-static-root-path="../static.files/" data-current-crate="crater" data-themes="" data-resource-suffix="" data-rustdoc-version="1.78.0-nightly (ee9c7c940 2024-02-14)" data-channel="nightly" data-search-js="search-dd67cee4cfa65049.js" data-settings-js="settings-4313503d2e1961c2.js" ><script src="../static.files/storage-4c98445ec4002617.js"></script><script defer src="sidebar-items.js"></script><script defer src="../static.files/main-48f368f3872407c8.js"></script><noscript><link rel="stylesheet" href="../static.files/noscript-04d5337699b92874.css"></noscript><link rel="alternate icon" type="image/png" href="../static.files/favicon-16x16-8b506e7a72182f1c.png"><link rel="alternate icon" type="image/png" href="../static.files/favicon-32x32-422f7d1d52889060.png"><link rel="icon" type="image/svg+xml" href="../static.files/favicon-2c020d218678b618.svg"></head><body class="rustdoc trait"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle" title="show sidebar"></button></nav><nav class="sidebar"><div class="sidebar-crate"><h2><a href="../crater/index.html">crater</a><span class="version">0.1.0</span></h2></div><h2 class="location"><a href="#">KdRegion</a></h2><div class="sidebar-elems"><section><h3><a href="#required-associated-types">Required Associated Types</a></h3><ul class="block"><li><a href="#associatedtype.Point">Point</a></li></ul><h3><a href="#required-methods">Required Methods</a></h3><ul class="block"><li><a href="#tymethod.extend">extend</a></li><li><a href="#tymethod.min_sqdist">min_sqdist</a></li><li><a href="#tymethod.single_point">single_point</a></li><li><a href="#tymethod.split">split</a></li></ul><h3><a href="#object-safety">Object Safety</a></h3><h3><a href="#implementors">Implementors</a></h3></section><h2><a href="index.html">In crate crater</a></h2></div></nav><div class="sidebar-resizer"></div>
    <main><div class="width-limiter"><nav class="sub"><form class="search-form"><span></span><div id="sidebar-button" tabindex="-1"><a href="../crater/all.html" title="show sidebar"></a></div><input class="search-input" name="search" aria-label="Run search in the documentation" autocomplete="off" spellcheck="false" placeholder="Click or press ‘S’ to search, ‘?’ for more options…" type="search"><div id="help-button" tabindex="-1"><a href="../help.html" title="help">?</a></div><div id="settings-menu" tabindex="-1"><a href="../settings.html" title="settings"><img width="22" height="22" alt="Change settings" src="../static.files/wheel-7b819b6101059cd0.svg"></a></div></form></nav><section id="main-content" class="content"><div class="main-heading"><h1>Trait <a href="index.html">crater</a>::<wbr><a class="trait" href="#">KdRegion</a><button id="copy-path" title="Copy item path to clipboard"><img src="../static.files/clipboard-7571035ce49a181d.svg" width="19" height="18" alt="Copy item path"></button></h1><span class="out-of-band"><a class="src" href="../src/crater/lib.rs.html#50-82">source</a> · <button id="toggle-all-docs" title="collapse all docs">[<span>&#x2212;</span>]</button></span></div><pre class="rust item-decl"><code>pub trait KdRegion: <a class="trait" href="https://doc.rust-lang.org/nightly/core/marker/trait.Sized.html" title="trait core::marker::Sized">Sized</a> {
    type <a href="#associatedtype.Point" class="associatedtype">Point</a>: <a class="trait" href="trait.KdPoint.html" title="trait crater::KdPoint">KdPoint</a>;

    // Required methods
    fn <a href="#tymethod.split" class="fn">split</a>(&amp;self, point: &amp;Self::<a class="associatedtype" href="trait.KdRegion.html#associatedtype.Point" title="type crater::KdRegion::Point">Point</a>, layer: <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.usize.html">usize</a>) -&gt; <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.tuple.html">(Self, Self)</a>;
<span class="item-spacer"></span>    fn <a href="#tymethod.extend" class="fn">extend</a>(&amp;mut self, point: &amp;Self::<a class="associatedtype" href="trait.KdRegion.html#associatedtype.Point" title="type crater::KdRegion::Point">Point</a>);
<span class="item-spacer"></span>    fn <a href="#tymethod.single_point" class="fn">single_point</a>(point: &amp;Self::<a class="associatedtype" href="trait.KdRegion.html#associatedtype.Point" title="type crater::KdRegion::Point">Point</a>) -&gt; Self;
<span class="item-spacer"></span>    fn <a href="#tymethod.min_sqdist" class="fn">min_sqdist</a>(
        &amp;self,
        point: &amp;Self::<a class="associatedtype" href="trait.KdRegion.html#associatedtype.Point" title="type crater::KdRegion::Point">Point</a>
    ) -&gt; &lt;Self::<a class="associatedtype" href="trait.KdRegion.html#associatedtype.Point" title="type crater::KdRegion::Point">Point</a> as <a class="trait" href="trait.KdPoint.html" title="trait crater::KdPoint">KdPoint</a>&gt;::<a class="associatedtype" href="trait.KdPoint.html#associatedtype.Distance" title="type crater::KdPoint::Distance">Distance</a>;
}</code></pre><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>A region in the tree, or in space in general.  A type implementing this will be tightly
coupled to some type implementing KdPoint.  For example, the prebuilt CuPoint struct
represents a point in Cartesian space with Euclidean distance, and the prebuilt CuRegion
struct represents cuboid regions of space (rectangles in 2D, rectangular prisms in 3D, etc).
Regions often represent infinitely many points in space (how many points are in your
typical rectangle?).  Regions should be able to represent a single point, but the ability
to represent an empty region isn’t necessary.</p>
</div></details><h2 id="required-associated-types" class="section-header">Required Associated Types<a href="#required-associated-types" class="anchor">§</a></h2><div class="methods"><section id="associatedtype.Point" class="method"><a class="src rightside" href="../src/crater/lib.rs.html#51">source</a><h4 class="code-header">type <a href="#associatedtype.Point" class="associatedtype">Point</a>: <a class="trait" href="trait.KdPoint.html" title="trait crater::KdPoint">KdPoint</a></h4></section></div><h2 id="required-methods" class="section-header">Required Methods<a href="#required-methods" class="anchor">§</a></h2><div class="methods"><details class="toggle method-toggle" open><summary><section id="tymethod.split" class="method"><a class="src rightside" href="../src/crater/lib.rs.html#64">source</a><h4 class="code-header">fn <a href="#tymethod.split" class="fn">split</a>(&amp;self, point: &amp;Self::<a class="associatedtype" href="trait.KdRegion.html#associatedtype.Point" title="type crater::KdRegion::Point">Point</a>, layer: <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.usize.html">usize</a>) -&gt; <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.tuple.html">(Self, Self)</a></h4></section></summary><div class="docblock"><p>Given a point p in this region A and a layer l, split A into two subregions B and C so that:</p>
<ul>
<li>Any point q in A is in B or C, that is, if A.min_sqdist(q) = 0, then either B.min_sqdist(q) = 0
or C.min_sqdist(q) = 0 (possibly both).  Note that strictly speaking this only <em>needs</em> to be
true over all points in the tree, not all points in space, but in practice it is almost always
much easier to make this true for all points in space, not least because this trait and
method have no reference to any particular KD tree.</li>
<li>Any point q in B is &lt;= than p in layer l, using KdPoint::cmp, and any point in C is &gt;=</li>
<li>Any point not in A should hopefully be farther from B than from C (or visa versa) in at least
some layers (note that distance doesn’t depend on layer, but split direction does).
That is, if A.min_dist(q) = d &gt; 0, then B.min_sqdist(q), C.min_sqdist(q) &gt;= d (are both at least d),
and ideally one should be significantly more in at least some layers.
Note how the basic instance of regions, cuboid regions, obviously obey all these properties</li>
</ul>
</div></details><details class="toggle method-toggle" open><summary><section id="tymethod.extend" class="method"><a class="src rightside" href="../src/crater/lib.rs.html#69">source</a><h4 class="code-header">fn <a href="#tymethod.extend" class="fn">extend</a>(&amp;mut self, point: &amp;Self::<a class="associatedtype" href="trait.KdRegion.html#associatedtype.Point" title="type crater::KdRegion::Point">Point</a>)</h4></section></summary><div class="docblock"><p>Given a region and a point possibly not in the region, extend the region to include the point if
necessary.  The concrete requirements this places on the implementation are that
self.min_sqdist(q) can only decrease or remain the same for any fixed q, and in particular self.extend(q)
should cause self.min_sqdist(q) to be 0 if it wasn’t already</p>
</div></details><details class="toggle method-toggle" open><summary><section id="tymethod.single_point" class="method"><a class="src rightside" href="../src/crater/lib.rs.html#75">source</a><h4 class="code-header">fn <a href="#tymethod.single_point" class="fn">single_point</a>(point: &amp;Self::<a class="associatedtype" href="trait.KdRegion.html#associatedtype.Point" title="type crater::KdRegion::Point">Point</a>) -&gt; Self</h4></section></summary><div class="docblock"><p>Create a region consisting of a single point.  For cuboid regions for example, this is represented as
a cuboid whose inclusive “start” and “end” points are both the same.  Types implementing this trait
should be able to represent single points fairly well, but because of the conservative nature of
everything, it is acceptable to fudge it by having a very small region containing the point.
It’s not necessary for types to be able to represent an empty region well or even at all.</p>
</div></details><details class="toggle method-toggle" open><summary><section id="tymethod.min_sqdist" class="method"><a class="src rightside" href="../src/crater/lib.rs.html#81">source</a><h4 class="code-header">fn <a href="#tymethod.min_sqdist" class="fn">min_sqdist</a>(&amp;self, point: &amp;Self::<a class="associatedtype" href="trait.KdRegion.html#associatedtype.Point" title="type crater::KdRegion::Point">Point</a>) -&gt; &lt;Self::<a class="associatedtype" href="trait.KdRegion.html#associatedtype.Point" title="type crater::KdRegion::Point">Point</a> as <a class="trait" href="trait.KdPoint.html" title="trait crater::KdPoint">KdPoint</a>&gt;::<a class="associatedtype" href="trait.KdPoint.html#associatedtype.Distance" title="type crater::KdPoint::Distance">Distance</a></h4></section></summary><div class="docblock"><p>Return the minimal squared distance any point in this region could have to a given point.
The return value must be &lt;= KdPoint::sqdist between the given point and any point within this region.
It’s safe to return a smaller value, or even always return 0, but this degrades performance because
we can’t prune subtrees from the search.
If B is a subregion of A and p is a point not in A, then B.min_sqdist(p) &gt;= A.min_sqdist(p)</p>
</div></details></div><h2 id="object-safety" class="section-header">Object Safety<a href="#object-safety" class="anchor">§</a></h2><div class="object-safety-info">This trait is <b>not</b> <a href="https://doc.rust-lang.org/nightly/reference/items/traits.html#object-safety">object safe</a>.</div><h2 id="implementors" class="section-header">Implementors<a href="#implementors" class="anchor">§</a></h2><div id="implementors-list"><details class="toggle implementors-toggle"><summary><section id="impl-KdRegion-for-CuRegion%3CT,+N%3E" class="impl"><a class="src rightside" href="../src/crater/cuboid.rs.html#71-112">source</a><a href="#impl-KdRegion-for-CuRegion%3CT,+N%3E" class="anchor">§</a><h3 class="code-header">impl&lt;T: <a class="trait" href="https://doc.rust-lang.org/nightly/core/cmp/trait.Ord.html" title="trait core::cmp::Ord">Ord</a> + <a class="trait" href="https://doc.rust-lang.org/nightly/core/clone/trait.Clone.html" title="trait core::clone::Clone">Clone</a> + <a class="trait" href="https://docs.rs/num-traits/0.2/num_traits/trait.NumRef.html" title="trait num_traits::NumRef">NumRef</a>, const N: <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.usize.html">usize</a>&gt; <a class="trait" href="trait.KdRegion.html" title="trait crater::KdRegion">KdRegion</a> for <a class="struct" href="cuboid/struct.CuRegion.html" title="struct crater::cuboid::CuRegion">CuRegion</a>&lt;T, N&gt;</h3></section></summary><div class="impl-items"><section id="associatedtype.Point-1" class="associatedtype trait-impl"><a href="#associatedtype.Point-1" class="anchor">§</a><h4 class="code-header">type <a href="#associatedtype.Point" class="associatedtype">Point</a> = <a class="struct" href="cuboid/struct.CuPoint.html" title="struct crater::cuboid::CuPoint">CuPoint</a>&lt;T, N&gt;</h4></section></div></details></div><script src="../trait.impl/crater/trait.KdRegion.js" async></script></section></div></main></body></html>